# Sistem Informasi Sekolah TJKT MPKK

Sistem Informasi Sekolah berbasis web dengan fitur **Face Recognition** untuk absensi, manajemen nilai, dan ujian online khusus untuk jurusan TJKT (Teknik Jaringan Komputer dan Telekomunikasi) MPKK.

## ✨ Fitur Utama

### 🔐 Multi-Role System
- **Admin**: Kelola sistem, lihat statistik, dan monitoring
- **Guru**: Kelola nilai, buat ujian, dan lihat absensi
- **Siswa**: Absensi face recognition, lihat nilai, dan kerjakan ujian

### 👤 Face Recognition
- Registrasi wajah untuk siswa
- Absensi otomatis menggunakan teknologi face recognition
- Real-time face detection dan matching
- Tersimpan secara aman di database

### 📊 Sistem Absensi
- Absensi face recognition atau manual
- Real-time attendance tracking dengan Socket.IO
- Timestamp otomatis (tanggal dan jam)
- Riwayat absensi lengkap
- Dashboard statistik kehadiran

### 📝 Manajemen Nilai
- Input nilai oleh guru
- Berbagai kategori: UH, UTS, UAS, Tugas, Praktik
- Statistik nilai per siswa
- Rata-rata nilai otomatis
- Export dan filter data

### 📋 Sistem Ujian
- Buat ujian pilihan ganda
- Set durasi dan jumlah soal
- Auto-grading untuk pilihan ganda
- Tracking submission siswa
- Lihat hasil ujian real-time

## 🚀 Teknologi

### Backend
- **Vercel Serverless Functions** (API)
- **Node.js** + **Express.js** (opsional dev)
- **Supabase** (database + realtime)
- **Socket.IO** (dev realtime)
- **JWT** untuk authentication
- **bcryptjs** untuk password hashing

### Frontend
- **React 18**
- **React Router** untuk navigation
- **Axios** untuk HTTP requests
- **face-api.js** untuk face recognition
- **Lucide React** untuk icons
- **Socket.IO Client** untuk real-time

## 📦 Instalasi

### Prerequisites
- Node.js (v14 atau lebih baru)
- npm atau yarn

### Step 1: Clone atau Download Project
```bash
cd SistemKelasTjkt
```

### Step 2: Install Dependencies

Install backend dependencies:
```bash
npm install
```

Install client dependencies:
```bash
cd client
npm install
cd ..
```

Atau gunakan command ini untuk install semua:
```bash
npm run install-all
```

### Step 3: Download Face Recognition Models

Model face recognition akan diunduh otomatis saat `npm install` via script `client/scripts/fetch-models.js`. Jika gagal, lakukan manual seperti di bawah.

1. Buat folder `models` di `client/public/`
```bash
mkdir client/public/models
```

2. Download models dari:
   https://github.com/justadudewhohacks/face-api.js/tree/master/weights

Files yang dibutuhkan:
- `tiny_face_detector_model-weights_manifest.json`
- `tiny_face_detector_model-shard1`
- `face_landmark_68_model-weights_manifest.json`
- `face_landmark_68_model-shard1`
- `face_recognition_model-weights_manifest.json`
- `face_recognition_model-shard1` & `shard2`
- `face_expression_model-weights_manifest.json`
- `face_expression_model-shard1`

Atau download menggunakan git:
```bash
cd client/public
git clone https://github.com/justadudewhohacks/face-api.js-models models
cd ../..
```

### Step 4: Jalankan Aplikasi

**Development Mode** (recommended):
```bash
npm run dev
```

Atau jalankan secara terpisah:

Terminal 1 (Backend):
```bash
npm run server
```

Terminal 2 (Frontend):
```bash
npm run client
```

**Production Mode**:
```bash
cd client
npm run build
cd ..
node server/server.js
## ☁️ Deploy ke Vercel

1. Buat project di Vercel dan connect repository
2. Set Environment Variables pada Vercel:

   Backend (Serverless functions):
   - `SUPABASE_URL`
   - `SUPABASE_SERVICE_ROLE_KEY` (atau `SUPABASE_ANON_KEY`)
   - `TELEGRAM_BOT_TOKEN` (contoh: 7960819436:AAEi0F_YzgFGOeKCkdPibGAAHIIpFLp4ljE)
   - `TELEGRAM_CHAT_ID` (chat id target guru/admin)

   Frontend (Build time):
   - `REACT_APP_SUPABASE_URL`
   - `REACT_APP_SUPABASE_ANON_KEY`

3. Deploy. Vercel akan build `client` dan men-serve `api/*` sebagai serverless

4. Gunakan endpoint serverless:
   - `/api/attendance/record`
   - `/api/face/register`
   - `/api/face/descriptors`
   - `/api/face/status`
   - `/api/telegram/notify`

Database schema Supabase (buat tables minimal):

```sql
create table if not exists attendance (
  id bigint generated by default as identity primary key,
  student_id text,
  nisn text,
  nama text,
  kelas text,
  type text,
  method text,
  timestamp_iso text,
  date_id text,
  time_id text,
  status text,
  inserted_at timestamp with time zone default now()
);

create table if not exists face_descriptors (
  student_id text primary key,
  nisn text,
  nama text,
  descriptors jsonb,
  registered_at timestamp with time zone default now()
);

-- Enable realtime
alter publication supabase_realtime add table attendance;
```

```

Aplikasi akan berjalan di:
- Frontend: http://localhost:3000
- Backend API: http://localhost:5000

## 👥 User Accounts

### Admin
```
Username: admin1 atau admin2
Password: admin123
```

### Guru
```
Username: guru1 atau guru2
Password: guru123
```

### Siswa
```
Username: NISN (contoh: 0089990908)
Password: ID Siswa (contoh: 6643)
```

**Daftar Siswa:**
- ALLDOO SAPUTRA (NISN: 0089990908, ID: 6643)
- ALYA ANGGITA MAHERA (NISN: 0071887022, ID: 6644)
- AMELIA (NISN: 0071317242, ID: 6645)
- Dan 26 siswa lainnya...

## 📖 Cara Penggunaan

### Untuk Siswa:

1. **Login**
   - Gunakan NISN sebagai username
   - Gunakan ID Siswa sebagai password

2. **Registrasi Wajah**
   - Buka menu "Registrasi Wajah"
   - Klik "Aktifkan Kamera"
   - Posisikan wajah di depan kamera
   - Klik "Daftarkan Wajah"

3. **Absensi**
   - Setelah wajah terdaftar, buka menu "Absensi Saya"
   - Klik "Mulai Absensi"
   - Sistem akan otomatis mendeteksi wajah dan mencatat absensi

4. **Lihat Nilai**
   - Buka menu "Nilai Saya"
   - Lihat semua nilai dan rata-rata

5. **Kerjakan Ujian**
   - Buka menu "Ujian"
   - Pilih ujian yang tersedia
   - Klik "Mulai Ujian"
   - Jawab semua soal dan submit

### Untuk Guru:

1. **Input Nilai**
   - Buka menu "Nilai"
   - Klik "Tambah Nilai"
   - Pilih siswa dan mata pelajaran
   - Input nilai dan simpan

2. **Buat Ujian**
   - Buka menu "Ujian"
   - Klik "Buat Ujian"
   - Isi detail ujian
   - Tambah soal pilihan ganda
   - Tentukan jawaban yang benar
   - Simpan ujian

3. **Monitoring Absensi**
   - Lihat statistik kehadiran real-time
   - Export data absensi

### Untuk Admin:

1. **Dashboard**
   - Lihat statistik lengkap
   - Monitor kehadiran siswa
   - Lihat absensi terbaru

2. **Kelola Data**
   - Akses semua fitur guru
   - Monitoring semua aktivitas sistem

## 🎨 Fitur Design

- **Modern & Friendly UI** dengan gradient colors
- **Responsive Design** untuk desktop dan mobile
- **Dark themed** camera interface
- **Real-time updates** dengan animasi smooth
- **Interactive components** dengan hover effects
- **Beautiful cards** dan layouts
- **Color-coded badges** untuk status

## 🔧 Konfigurasi

File `.env` (jika ingin custom):
```env
PORT=5000
JWT_SECRET=tjkt_mpkk_secret_key_2024
NODE_ENV=development
```

## 📱 Browser Support

- Chrome (recommended untuk face recognition)
- Firefox
- Edge
- Safari (dengan limitasi pada face recognition)

**Note**: Face recognition membutuhkan HTTPS di production atau localhost di development.

## 🛡️ Security

- Password di-hash menggunakan bcryptjs
- JWT token untuk authentication
- Face descriptors tersimpan aman di server
- Input validation di backend
- CORS enabled untuk development

## 📊 Database

Aplikasi ini menggunakan **in-memory storage** untuk demo purposes. Data akan hilang saat server restart.

Untuk production, disarankan menggunakan database seperti:
- MongoDB
- PostgreSQL
- MySQL

## 🐛 Troubleshooting

### Camera tidak bisa diakses
- Pastikan browser memiliki permission untuk akses camera
- Gunakan HTTPS atau localhost
- Check browser compatibility

### Face models tidak load
- Pastikan folder `client/public/models` berisi semua model files
- Check console untuk error messages
- Verify file paths

### Port sudah digunakan
```bash
# Kill process yang menggunakan port 3000 atau 5000
# Windows:
netstat -ano | findstr :5000
taskkill /PID <PID> /F

# Linux/Mac:
lsof -ti:5000 | xargs kill
```

## 📝 License

MIT License

## 👨‍💻 Developer

Sistem Informasi TJKT MPKK
Developed with ❤️ for better education management

## 🙏 Credits

- **face-api.js** by Vincent Mühler
- **React** by Facebook
- **Express.js** by TJ Holowaychuk
- **Socket.IO** for real-time communication

## 📞 Support

Jika ada pertanyaan atau masalah, silakan buat issue di repository ini.

---

**Happy Learning! 🎓**

